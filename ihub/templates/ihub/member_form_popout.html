{% extends 'shared_models/generic_popout_form.html' %}
{% load bootstrap4 %}
{% load i18n %}
{% load static %}

{% block form_fields %}
  {% for field in form %}

    {% if field.name == "person" %}
      {% bootstrap_field field size='small' layout='horizontal' placeholder="" %}
      <div class="mb-3">
        <a pop-href="{% url 'ihub:person_new_pop' %}" href="#" id="add_person">
          <em>
            {% trans "(add a new person)" %}
          </em>
        </a>
      </div>

      {% if object.person %}

        <div id="contact_card">
          <h5>Contact Details:</h5>
          <div class="">
            {{ object.person.contact_card|safe }}
          </div>
          <div class="mb-3">
            <a pop-href="{% url 'ihub:person_edit_pop' object.person.id %}" href="#" id="edit_person">
              <em>
                {% trans "(edit contact details)" %}
              </em>
            </a>
          </div>
        </div>
      {% endif %}
    {% else %}
      {% bootstrap_field field size='small' layout='horizontal' placeholder="" %}
    {% endif %}
  {% endfor %}
{% endblock %}



{% block extra_buttons %}
  {% if object %}
    <a class="btn btn-primary" href="#">
      {% trans "Add Consultation Role" %}
    </a>
    <a class="btn btn-danger" href="{% url 'ihub:member_delete' object.id %}">
      {% trans "Delete" %}
    </a>
  {% endif %}

{% endblock %}


{% block post_form_div %}
  {% if object %}
    <p>
      <em>
        {% trans "Last modified on" %} {{ object.date_last_modified }} {% trans "by" %} {{ object.last_modified_by }}
      </em>
    </p>
  {% endif %}

{% endblock %}

{% block body_js %}

  {{ block.super }}
  <script>
  $("#id_person").change(function () {
    $("#contact_card").prop("hidden", true)
  });
  </script>

{% endblock %}


