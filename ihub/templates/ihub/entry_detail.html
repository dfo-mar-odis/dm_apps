{% extends "ihub/ihub_base.html" %}
{% load static %}
{% load bootstrap4 %}
{% load verbose_names %}
{% load custom_filters %}
{% load i18n %}
{% load humanize %}

{% block content %}

    <style>
        .label {
            font-weight: bold;
        }

        .btn-sm, table, td {
            font-size: small;
        }

    </style>

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'ihub:index' %}">
                {% trans "Home" %}
            </a></li>
            <li class="breadcrumb-item"><a href="{% url 'ihub:entry_list' %}">
                {% trans "All Entries" %}
            </a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ object }}</li>
        </ol>
    </nav>

    <div class="indent-lg">


        <h1>
            {{ object }}
        </h1>


        <div class="btns">
            <a class="btn btn-sm btn-warning" href="{% url 'ihub:entry_edit' object.id %}">
                {% trans "Edit" %}
            </a>
            <a class="btn btn-sm btn-danger " href="{% url 'ihub:entry_delete' object.id %}">
                {% trans "Delete" %}
            </a>

        </div>


        <br><br>

        <div class="row">
            <div class="col-4">
                <h3>
                    {% trans "Entry Detail:" %}
                </h3>

                <table class="table table-sm table-striped">
                    {% for field in field_list %}
                        {% if field == "organizations" %}
                            <tr>
                                <th>
                                    {% get_verbose_label instance=object field_name=field %}
                                </th>
                                <td>
                                    {% for org in object.organizations.all %}
                                        <a href="{% url 'ihub:org_detail' org.id %}" target="_blank">
                                            {{ org }}
                                        </a><br>
                                    {% endfor %}
                                </td>
                            </tr>
                        {% else %}
                            {% verbose_td_display instance=object field_name=field date_format="%d-%b-%Y" %}

                        {% endif %}
                    {% endfor %}
                </table>
                <br>
                <h3>
                    {% trans "Funding Detail:" %}
                </h3>

                <table class="table table-sm table-striped">
                    {% for field in field_list_1 %}
                        {% verbose_td_display instance=object field_name=field format="currency" %}
                    {% endfor %}
                </table>

                <br>
            </div>

            <div class="col-6">
                {% include "ihub/_people.html" %}
                {% include "ihub/_notes.html" %}
                {% include "ihub/_file.html" %}
            </div>

        </div>
    </div>


    </div>



    <script type="application/javascript">

        $(".note-delete-me").click(function () {
            var objectId = $(this)[0].getAttribute("val");

            var userInput = "";
            userInput = confirm("{% trans "Are you sure you want to delete this note?" %}");

            if (userInput === true) {
                $("#note-secrect-delete-btn-" + objectId)[0].click();
            }
        });


        $(".person-delete-me").click(function (e) {
            var objectId = $(this)[0].getAttribute("val");
            var userInput = "";
            userInput = confirm("{% trans "Are you sure you want to delete this person from the entry?" %}");

            if (userInput === true) {
                $("#person-secrect-delete-btn-" + objectId)[0].click();
            }


        });
        $(".file-delete-me").click(function () {
            var objectId = $(this)[0].getAttribute("val");

            var userInput = "";
            userInput = confirm("{% trans "Are you sure you want to delete this file from the entry?" %}");

            if (userInput === true) {
                $("#file-secrect-delete-btn-" + objectId)[0].click();
            }
        });

    </script>


{% endblock content %}
