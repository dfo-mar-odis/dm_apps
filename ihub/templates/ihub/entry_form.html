{% extends "ihub/ihub_base.html" %}

{% load static %}
{% load bootstrap4 %}
{% load i18n %}

{% block header %}
    <link rel="stylesheet" href="{% static 'lou-multi-select-e052211/css/multi-select.css' %}" media="screen" type="text/css">
{% endblock %}

{% block content %}
    <style>
        .ms-container {
            width: 100%;
        }
    </style>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'ihub:index' %}">
                {% trans "Home" %}
            </a></li>
            <li class="breadcrumb-item"><a href="{% url 'ihub:entry_list' %}">
                {% trans "All Entries" %}
            </a></li>
            {% if object %}
                <li class="breadcrumb-item"><a href="{% url 'ihub:entry_detail' object.id %}">{{ object }}</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">
                    {% trans "Edit" %}
                </li>
            {% else %}
                <li class="breadcrumb-item active" aria-current="page">
                    {% trans "New Entry" %}
                </li>
            {% endif %}
        </ol>
    </nav>

    <div class="container">
        <h1>
            {% if object.id %}
                {{ object }}
            {% else %}
                {% trans "New Entry" %}
            {% endif %}
        </h1>
        <br><br>

        {% bootstrap_form_errors form %}
        <form method="post" class="form">

            {% csrf_token %}
            {% buttons %}
                <div class="btn-group">
                    {% if object.id %}
                        <button type="submit" class="btn btn-primary">
                            {% trans "Update" %}
                        </button>
                    {% else %}
                        <button type="submit" class="btn btn-primary">
                            {% trans "Add" %}
                        </button>
                    {% endif %}

                    {% if object.id %}
                        <a class="btn btn-secondary" href="{% url 'ihub:entry_detail' object.id %}">
                            {% trans "Cancel" %}
                        </a>
                    {% else %}
                        <a class="btn btn-secondary" href="{% url 'ihub:entry_list' %}">
                            {% trans "Cancel" %}
                        </a>
                    {% endif %}
                </div>
            {% endbuttons %}

            {% for field in form %}
                {#                {% if field.name == "cruise" %}#}
                {#                    {% bootstrap_field field placeholder="" %}#}
                {#                    <a href="{% url 'diets:cruise_new'  %}" target="_blank">(add new cruise)</a><br><br> {# should produce a popout window... #}
                {#                {% else %}#}
                {% bootstrap_field field placeholder="" %}

                {#                {% endif %}#}
            {% endfor %}


            {% buttons %}
                <div class="btn-group">
                    {% if object.id %}
                        <button type="submit" class="btn btn-primary">
                            {% trans "Update" %}
                        </button>
                    {% else %}
                        <button type="submit" class="btn btn-primary">
                            {% trans "Add" %}
                        </button>
                    {% endif %}

                    {% if object.id %}
                        <a class="btn btn-secondary" href="{% url 'ihub:entry_detail' object.id %}">
                            {% trans "Cancel" %}
                        </a>
                    {% else %}
                        <a class="btn btn-secondary" href="{% url 'ihub:entry_list' %}">
                            {% trans "Cancel" %}
                        </a>
                    {% endif %}
                </div>
            {% endbuttons %}
        </form>

    </div>
    <script src="{% static 'lou-multi-select-e052211/js/jquery.multi-select.js' %}" type="text/javascript"></script>
    <script type="application/javascript">
        $("#id_organizations").multiSelect()
        $("#id_regions").multiSelect()
        $("#id_sectors").multiSelect()
    </script>
{% endblock content %}
